<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Sistema de Builds — V2 (Análise)</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Sistema de Builds — V2 (MVP Avançado)</h1>
    <div class="header-actions">
      <button id="btnNew" class="btn">+ Novo Personagem</button>
      <button id="btnAdmin" class="btn ghost">Admin (Atributos)</button>
    </div>
  </header>

  <main class="container">
    <div class="grid">
      <div>
        <section class="card">
          <div class="card-header">
            <h2>Builds Salvos</h2>
            <div class="card-actions">
              <button id="btnImport" class="btn ghost small">Importar JSON</button>
              <button id="btnExportAll" class="btn small">Exportar todos CSV</button>
            </div>
          </div>
          <div id="buildList" class="builds"></div>
        </section>

        <section id="editorWrap" class="card" style="display:none; margin-top:12px;">
          <div class="card-header">
            <h2 id="editorTitle">Criar Personagem</h2>
            <div>
              <button id="btnAnalyze" class="btn small">Analisar</button>
              <button id="btnSaveBuild" class="btn small">Salvar Build</button>
              <button id="btnCloseEditor" class="btn ghost small">Fechar</button>
            </div>
          </div>

          <div class="card-body">
            <label>Nome do Personagem *</label>
            <input id="charName" type="text" placeholder="Nome">

            <label>Classe (opcional)</label>
            <input id="charClass" type="text" placeholder="Ex: DPS, Support">

            <label>Número de Artefatos (1..4)</label>
            <select id="artifactCount">
              <option>1</option>
              <option>2</option>
              <option>3</option>
              <option selected>4</option>
            </select>

            <div id="artifactsContainer" style="margin-top:12px"></div>
          </div>
        </section>
      </div>

      <aside class="card summary">
        <h3>Resumo / Checklist</h3>
        <div>
          <div><strong>Atributos Encontrados:</strong></div>
          <ul id="presentAttrs"></ul>

          <div style="margin-top:12px"><strong>Atributos Faltando:</strong></div>
          <ul id="missingAttrs"></ul>

          <div style="margin-top:12px"><strong>Gemas Inúteis:</strong></div>
          <ul id="uselessGems"></ul>

          <div style="margin-top:12px;display:flex;gap:8px">
            <button id="btnExportCSV" class="btn small">Export CSV</button>
            <button id="btnShare" class="btn ghost small">Gerar Link</button>
            <button id="btnDownloadJSON" class="btn ghost small">Download JSON</button>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <footer>Versão V2+V4 — LocalStorage. Futuro: Firebase Realtime.</footer>

  <!-- Modal: Gem -->
  <div id="modalGem" class="modal-back" style="display:none">
    <div class="modal">
      <h3 id="modalGemTitle">Adicionar / Editar Gema</h3>

      <div class="modal-body">
        <label>Elemento</label>
        <div id="gemElement" class="pill">fogo</div>

        <label>Raridade</label>
        <select id="gemRarity">
          <option>SSR</option>
          <option>SS</option>
          <option>S</option>
          <option>A</option>
          <option>B</option>
        </select>

        <label>Plus (+0..+20)</label>
        <input id="gemPlus" type="number" min="0" max="20" value="0">

        <label>Nº Atributos (1..3)</label>
        <select id="gemAttrCount">
          <option>1</option>
          <option>2</option>
          <option>3</option>
        </select>

        <div id="gemAttrList"></div>

        <div class="modal-actions">
          <button id="saveGem" class="btn small">Salvar Gema</button>
          <button id="cancelGem" class="btn ghost small">Cancelar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Admin -->
  <div id="modalAdmin" class="modal-back" style="display:none">
    <div class="modal">
      <h3>Admin — Lista de Atributos</h3>
      <p class="muted">Edite, marque como obrigatório PvP, ou adicione novos.</p>

      <div class="admin-table-wrap">
        <table class="admin-table">
          <thead>
            <tr><th>Nome</th><th>Tier</th><th>Elemento</th><th>Obrig.</th><th></th></tr>
          </thead>
          <tbody id="attrTable"></tbody>
        </table>
      </div>

      <h4>Adicionar Atributo</h4>
      <label>Nome</label>
      <input id="newAttrName" type="text">

      <label>Tier (1..3)</label>
      <select id="newAttrTier">
        <option>1</option>
        <option>2</option>
        <option selected>3</option>
      </select>

      <label>Elemento (ou vazio)</label>
      <select id="newAttrElement">
        <option value="">global</option>
        <option value="fogo">fogo</option>
        <option value="gelo">gelo</option>
        <option value="luz">luz</option>
        <option value="veneno">veneno</option>
      </select>

      <label class="row">
        <input id="newAttrRequired" type="checkbox"> Obrigatório PvP
      </label>

      <div class="modal-actions">
        <button id="addAttrBtn" class="btn small">Adicionar</button>
        <button id="closeAdmin" class="btn ghost small">Fechar</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
